<!DOCTYPE html>
<html>
  <head>
    <title>Green Cart - charity shopping</title>
    <meta name="description" content="Wir sammeln mit Deinem Einkauf Werbekosten und spenden 80% an die von Dir gewählte Charity. Dich kostet das keinen Cent mehr." />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <link href='//fonts.googleapis.com/css?family=Dosis' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="default.css">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=no,minimal-ui"/>
    <meta name="apple-itunes-app" content="app-id=751332885" />
    <meta property="og:title" content="Green Cart - charity shopping"/>
    <meta property="og:url" content="http://greencart.co"/>
    <meta property="og:site_name" content="Green Cart"/>
    <meta property="og:type" content="blog" />
    <meta property="og:description" content="Wir sammeln mit Deinem Einkauf Werbekosten und spenden 80% an die von Dir gewählte Charity. Dich kostet das keinen Cent mehr." />
    <meta property="og:image" content="http://greencart.co/assets/greencart_screenshot.jpg" />
  </head>
  <body>
    <div class="image-container">
      <img class="bg-image sos" alt="choosen charity"/>
    </div>
    <div class="header">
      <h1>
        Green Cart
      </h1>
    </div>
    <div class="content">
      <h3>Wähle eine Organisation, die <span color="green">Greencart</span> finanziell unterstützen soll</h3>
      <div id='slider' class='swipe'>
        <div class='swipe-wrap'>
          <div><img src="assets/logos/sos.png" alt="SOS Kinderdörfer"/></div>
          <div><img src="assets/logos/ov.png" alt="Oro Verde"/></div>
          <div><img src="assets/logos/aog.png" alt="Ärzte ohne Grenzen"/></div>
          <div><img src="assets/logos/ai.png" alt="Amnesty International"/></div>
        </div>
      </div>
      <div class="nav">
        <a rel="prev" class="arrows prev">&lt;</a>
        <a rel="next" class="arrows next">&gt;</a>
      </div>
      <h3>Starte Deinen Einkauf:</h3>
      <form method="GET" action="http://www.amazon.de/s/">
        <input class="keyword-input" type="text" name="field-keywords" placeholder="Amazon Produktsuche" />
        <button>
          <img src="/assets/Amazon.png" alt="Amazon">
        </button>
        <input type="hidden" name="tag" value="gc-sos-21"/>
      </form>
      <h4>Wir sammeln mit Deinem Einkauf Werbekosten und spenden 80% an die von Dir gewählte Charity.<br /> Dich kostet das keinen Cent mehr.<br />Wie es genau funktioniert, <a href="http://blog.greencart.co/post/67258633679/ueber-green-cart-charity-shopping">erfährst Du hier.</a></h4>
    </div>
    <div class="footer">
      <a href="http://greencart.co/warum">Über Greencart</a>
      <a href="http://kurtzberg-productions.de/impressum">Impressum</a>
    </div>
  </body>
  <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/zepto/1.0/zepto.min.js"></script>
  <script type="text/javascript" src="assets/swipe.js"></script>
  <script type="text/javascript">
    var charityTags = ['gc-sos-21', 'gc-oroverde-21','gc-aerzte-21','gc-amnesty-21'];

    function preload(arrayOfImages) {
      $(arrayOfImages).each(function(){
        $('<img/>')[0].src = this;
      });
    }

    $(function(){
      preload([
        '/assets/charities/sos.jpg',
        '/assets/charities/ov.jpg',
        '/assets/charities/aog.jpg',
        '/assets/charities/ai.jpg'
      ]);

      var ogs = ['sos', 'ov', 'aog', 'ai'];

      $('body').on('keydown', function(event) {
        if(event.keyCode == 37) {
          mySwipe.prev();
        }
        else if(event.keyCode == 39) {
          mySwipe.next();
        }
      });

      debounce = function(func, wait) {
        var timeout, args, context, timestamp, result;
        return function() {
          context = this;
          args = arguments;
          timestamp = new Date();
          var later = function() {
            var last = (new Date()) - timestamp;
            if (last < wait) {
              timeout = setTimeout(later, wait - last);
            } else {
              timeout = null;
              result = func.apply(context, args);
            }
          };
          var callNow = !timeout;
          if (!timeout) {
            timeout = setTimeout(later, wait);
          }
          if (callNow) result = func.apply(context, args);
          return result;
        };
      };

      var index = 0;

      next = function(goTo) {
        var $current = $('.bg-image').first();
        if(goTo == index) {
          return;
        }
        else if(goTo >= 0) {
          var nextIndex = goTo;
        }
        else {
          var nextIndex = (index == ogs.length - 1 ? 0 : index + 1);
        }
        var nextClass = ogs[nextIndex];
        var $nextImage = $('<img class="bg-image">').addClass(nextClass);
        $nextImage.insertBefore($current);
        $current.css({opacity: 0});
        setTimeout(function(){
          $current.remove();
        }, 1000);
        index = nextIndex;
      };

      next = debounce(next, 1000);

      $('.next').click(function() { mySwipe.next(); });
      $('.prev').click(function() { mySwipe.prev(); });

      window.mySwipe = new Swipe(document.getElementById('slider'), {
        disableScroll: true,
        callback: function(index, elem) {
          next(index);
          $('input[name="tag"]').val(charityTags[index]);
        }
      });

    });

  </script>
</html>

